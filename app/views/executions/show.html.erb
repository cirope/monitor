<h3>
  <span class="text-muted"><%= Execution.model_name.human count: 1 %> -</span>
  <%= link_to @execution.script, @execution.script %>
  <span class="pull-right">
    <%= execution_status @execution.status %>
  </span>
</h3>

<p>
  <strong><%= Execution.human_attribute_name 'server' %></strong>:
  <%= @execution.server %>
</p>

<p>
  <strong><%= Execution.human_attribute_name 'started_at' %></strong>:
  <%= l @execution.started_at, format: :compact if @execution.started_at %>
</p>
<p>
  <strong><%= Execution.human_attribute_name 'ended_at' %></strong>:
  <%= l @execution.ended_at, format: :compact if @execution.ended_at %>
</p>

<div class="panel panel-default">
  <div class="panel-heading">
    <h3 class="panel-title">
      <%= link_to Execution.human_attribute_name('output'), '#execution-errors', data: { toggle: 'collapse' } %>
    </h3>
  </div>
  <div id="execution-errors" class="panel-collapse collapse in">
    <div class="panel-body">
      <p>
        <pre>
          <% if @execution.pending? || @execution.running? %>
             <samp data-actioncable-watch="execution" data-actioncable-watch-execution-id="<%= @execution.id %>"></samp>
          <% else %>
             <samp><%= @execution.output %></samp>
          <% end %>
        </pre>
      </p>
    </div>
  </div>
</div>

<%= render 'shared/parsed_output_errors', exec: @execution if @execution.output.present? && @execution.error? %>
