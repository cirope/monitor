+function () {
  var $container = $('[data-panel-id="<%= @panel.id %>"]')

  <% if @panel.errors.empty? %>
    $container.
      find('.btn').
      attr('disabled', true)

    Turbolinks.visit('<%= dashboard_path @panel.dashboard %>')

    setTimeout(function () {
      $('.loading-caption').removeAttr('hidden')
    })
  <% else %>
    $container.
      html('<%= j render('form') %>').
      find('[autofocus]').
      focus()
  <% end %>
}()
